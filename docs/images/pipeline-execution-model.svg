<svg xmlns="http://www.w3.org/2000/svg" width="1320" height="400" viewBox="0 0 1320 400" role="img" aria-label="Pipeline execution model with preActions, actions, and postActions.">
  <defs>
    <style>
      .title { font: 700 24px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .subtitle { font: 500 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #6b7280; }
      .heading { font: 700 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .text { font: 500 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .muted { fill: #6b7280; }
      .boxStroke { stroke-width: 2; }
      .chipText { font: 700 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .mono { font: 600 18px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; fill: #111827; }
    </style>
    <marker id="arrow" markerWidth="7" markerHeight="7" refX="6" refY="3.5" orient="auto">
      <path d="M0,0 L7,3.5 L0,7 Z" fill="#6b7280"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1320" height="400" fill="#ffffff"/>

  <text x="40" y="48" class="title">Pipeline execution model</text>
  <text x="40" y="76" class="subtitle">preActions → actions → postActions, with explicit short-circuit</text>

  <!-- Boxes -->
  <rect x="40" y="150" width="340" height="200" rx="18" fill="#f3f4f6" stroke="#d1d5db" class="boxStroke"/>
  <rect x="490" y="130" width="340" height="240" rx="18" fill="#dbeafe" stroke="#93c5fd" class="boxStroke"/>
  <rect x="940" y="150" width="340" height="200" rx="18" fill="#f3f4f6" stroke="#d1d5db" class="boxStroke"/>

  <!-- Arrows -->
  <line x1="380" y1="250" x2="490" y2="250" stroke="#6b7280" stroke-width="2.5" marker-end="url(#arrow)"/>
  <line x1="830" y1="250" x2="940" y2="250" stroke="#6b7280" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Pre -->
  <text x="68" y="185" class="heading">preActions</text>
  <text x="68" y="214" class="text">• validation / policy</text>
  <text x="68" y="238" class="text">• guardrails / rate limits</text>
  <text x="68" y="262" class="text">• early metrics hooks</text>
  <text x="68" y="286" class="text muted">always runs</text>

  <!-- Main actions -->
  <text x="518" y="165" class="heading">actions</text>

  <!-- Chips -->
  <rect x="518" y="178" width="76" height="30" rx="15" fill="#bfdbfe" stroke="#60a5fa"/>
  <text x="536" y="200" class="chipText">local</text>

  <rect x="602" y="178" width="88" height="30" rx="15" fill="#bbf7d0" stroke="#34d399"/>
  <text x="618" y="200" class="chipText">remote</text>

  <rect x="698" y="178" width="92" height="30" rx="15" fill="#e9d5ff" stroke="#a78bfa"/>
  <text x="714" y="200" class="chipText">prompt</text>

  <text x="518" y="232" class="text">• unary: <tspan class="mono">C → C</tspan></text>
  <text x="518" y="254" class="text">• control-aware: <tspan class="mono">(C, control) → C</tspan></text>
  <text x="518" y="276" class="text">• explicit short-circuit:</text>
  <text x="538" y="298" class="mono">control.shortCircuit()</text>
  <text x="518" y="320" class="text">• stop-vs-continue:</text>
  <text x="538" y="342" class="mono">shortCircuitOnException</text>
  <text x="518" y="364" class="text muted">errors captured into a result object</text>

  <!-- Post -->
  <text x="968" y="185" class="heading">postActions</text>
  <text x="968" y="214" class="text">• metrics export / tracing</text>
  <text x="968" y="238" class="text">• audit / persistence</text>
  <text x="968" y="262" class="text">• cleanup / notifications</text>
  <text x="968" y="286" class="text muted">always runs</text>
</svg>
