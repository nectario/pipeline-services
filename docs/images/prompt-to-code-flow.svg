<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="720" viewBox="0 0 1400 720" role="img" aria-label="Prompt-to-code: a prompt-based pipeline with mixed action types compiles into a per-language pipeline where prompt actions become generated local actions.">
  <defs>
    <style>
      .title { font: 700 28px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .subtitle { font: 500 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #6b7280; }
      .heading { font: 700 18px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .text { font: 500 16px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .muted { fill: #6b7280; }
      .typeLabel { font: 600 13px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #6b7280; }
      .chipText { font: 700 14px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; fill: #111827; }
      .box { stroke-width: 2; }
    </style>

    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#6b7280"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1400" height="720" fill="#ffffff"/>

  <text x="40" y="56" class="title">Prompt-to-code: mix actions, keep prompts small</text>
  <text x="40" y="90" class="subtitle">Pipelines can be mostly local/remote actions with a few prompt actions; generation turns prompts into language-native code</text>

  <!-- Legend -->
  <rect x="40" y="108" width="24" height="14" rx="7" fill="#dbeafe" stroke="#60a5fa" class="box"/>
  <text x="74" y="121" class="chipText">Local</text>
  <rect x="150" y="108" width="24" height="14" rx="7" fill="#dcfce7" stroke="#34d399" class="box"/>
  <text x="184" y="121" class="chipText">Remote</text>
  <rect x="288" y="108" width="24" height="14" rx="7" fill="#e9d5ff" stroke="#a78bfa" class="box"/>
  <text x="322" y="121" class="chipText">Prompt</text>
  <rect x="436" y="108" width="24" height="14" rx="7" fill="#eef2ff" stroke="#6366f1" class="box"/>
  <text x="470" y="121" class="chipText">Generated local</text>

  <!-- Top: prompt-based pipeline -->
  <rect x="40" y="160" width="1320" height="200" rx="18" fill="#ffffff" stroke="#d1d5db" class="box"/>
  <text x="64" y="196" class="heading">Prompt-based pipeline (source)</text>
  <text x="64" y="224" class="text muted">local + remote + prompt actions (small generation surface area)</text>

  <!-- Top pipeline actions (left → right) -->
  <rect x="90" y="270" width="170" height="60" rx="14" fill="#dbeafe" stroke="#60a5fa" class="box"/>
  <text x="106" y="295" class="text">validate + normalize</text>
  <text x="175" y="352" class="typeLabel" text-anchor="middle">Local Action</text>

  <rect x="335" y="270" width="170" height="60" rx="14" fill="#dcfce7" stroke="#34d399" class="box"/>
  <text x="351" y="295" class="text">enrich (lookup)</text>
  <text x="420" y="352" class="typeLabel" text-anchor="middle">Remote Action</text>

  <rect x="580" y="270" width="170" height="60" rx="14" fill="#e9d5ff" stroke="#a78bfa" class="box"/>
  <text x="596" y="295" class="text">prompt: classify</text>
  <text x="665" y="352" class="typeLabel" text-anchor="middle">Prompt Action</text>

  <rect x="825" y="270" width="170" height="60" rx="14" fill="#dbeafe" stroke="#60a5fa" class="box"/>
  <text x="841" y="295" class="text">apply rules</text>
  <text x="910" y="352" class="typeLabel" text-anchor="middle">Local Action</text>

  <rect x="1070" y="270" width="170" height="60" rx="14" fill="#e9d5ff" stroke="#a78bfa" class="box"/>
  <text x="1086" y="295" class="text">prompt: rewrite</text>
  <text x="1155" y="352" class="typeLabel" text-anchor="middle">Prompt Action</text>

  <!-- Top pipeline arrows -->
  <line x1="260" y1="300" x2="335" y2="300" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="505" y1="300" x2="580" y2="300" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="750" y1="300" x2="825" y2="300" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="995" y1="300" x2="1070" y2="300" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>

  <!-- Code generation (downwards) -->
  <text x="700" y="410" class="heading" text-anchor="middle">code generation</text>
  <line x1="700" y1="430" x2="700" y2="470" stroke="#6b7280" stroke-width="3.4" marker-end="url(#arrow)"/>
  <text x="700" y="488" class="text muted" text-anchor="middle">prompt actions → generated code</text>

  <!-- Bottom: compiled pipeline -->
  <rect x="40" y="500" width="1320" height="200" rx="18" fill="#ffffff" stroke="#d1d5db" class="box"/>
  <text x="64" y="536" class="heading">Compiled pipeline (per language)</text>
  <text x="64" y="564" class="text muted">prompt actions become generated local actions (reviewable + testable)</text>

  <!-- Bottom pipeline actions (left → right) -->
  <rect x="90" y="610" width="170" height="60" rx="14" fill="#dbeafe" stroke="#60a5fa" class="box"/>
  <text x="106" y="635" class="text">validate + normalize</text>
  <text x="175" y="692" class="typeLabel" text-anchor="middle">Local Action</text>

  <rect x="335" y="610" width="170" height="60" rx="14" fill="#dcfce7" stroke="#34d399" class="box"/>
  <text x="351" y="635" class="text">enrich (lookup)</text>
  <text x="420" y="692" class="typeLabel" text-anchor="middle">Remote Action</text>

  <rect x="580" y="610" width="170" height="60" rx="14" fill="#eef2ff" stroke="#6366f1" class="box"/>
  <text x="596" y="635" class="text">generated: classify</text>
  <text x="665" y="692" class="typeLabel" text-anchor="middle">Generated Local Action</text>

  <rect x="825" y="610" width="170" height="60" rx="14" fill="#dbeafe" stroke="#60a5fa" class="box"/>
  <text x="841" y="635" class="text">apply rules</text>
  <text x="910" y="692" class="typeLabel" text-anchor="middle">Local Action</text>

  <rect x="1070" y="610" width="170" height="60" rx="14" fill="#eef2ff" stroke="#6366f1" class="box"/>
  <text x="1086" y="635" class="text">generated: rewrite</text>
  <text x="1155" y="692" class="typeLabel" text-anchor="middle">Generated Local Action</text>

  <!-- Bottom pipeline arrows -->
  <line x1="260" y1="640" x2="335" y2="640" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="505" y1="640" x2="580" y2="640" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="750" y1="640" x2="825" y2="640" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>
  <line x1="995" y1="640" x2="1070" y2="640" stroke="#6b7280" stroke-width="2.8" marker-end="url(#arrow)"/>

  <!-- Footnote -->
  <text x="40" y="714" class="text muted">Conceptual view: prompts remain in source pipelines; compiled pipelines reference generated actions per target language.</text>
</svg>
